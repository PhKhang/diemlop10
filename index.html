<!-- <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" /> -->
<!-- <script defer src="https://pyscript.net/alpha/pyscript.js"></script> -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script defer src="selectnewnum.js"></script>
    <title>A random 15-year-old soul</title>
</head>

<body>
    <button id="nut" >Morb!</button>
    <iframe id="frame" src="https://comment.nld.com.vn/TraDiem/Lop10/TraDiemTHPT.aspx?SoBD=123456"></iframe>
    
    <!-- <py-env>
        - numpy
        - requests
        - lxml
        - rich
    </py-env> -->
    <!-- <py-script>
import json
import requests
import sys
import argparse
from lxml import html
from bs4 import BeautifulSoup
from rich.table import Table
from rich.console import Console
#from rich import print
from rich import box

# parser = argparse.ArgumentParser(description='Optional app description')
# parser.add_argument('-n', type=int, nargs="?", default=0)
# foo = int(parser.selectport[0])

USERNAME = "0909570940"
PASSWORD = "123"

hocki = '64'

LOGIN_URL = "http://tradiem.vn/Account/Login"
URL = "http://tradiem.vn/XemDiem/BangDiem/1079016/35273/"+hocki

def parseArguments():
    # Optional arguments
    parser.add_argument("-dD", "--debtDad", help="Debt dad.", type=float, default=1000.)
    return args

def main():
    session_requests = requests.session()

    # Get login csrf token
    result = session_requests.get(LOGIN_URL)
    tree = html.fromstring(result.text)
    authenticity_token = list(set(tree.xpath("//input[@name='__RequestVerificationToken']/@value")))[0]

    # Create payload
    payload = {
        "UserName": USERNAME, 
        "Password": PASSWORD, 
        "__RequestVerificationToken": authenticity_token
    }

    # Perform login
    result = session_requests.post(LOGIN_URL, data = payload, headers = dict(referer = LOGIN_URL))

    # Scrape url
    result = session_requests.get(URL, headers = dict(referer = URL))
    tree = html.fromstring(result.content)
    bucket_names = tree.xpath("//div[@class='shd']/a/text()")
    bruh = tree.xpath("//tbody")
    soup = BeautifulSoup(result.text, "lxml")

    # Testing code
    #print(bucket_names)
    #print(bruh)
    #print(soup)
    #print(result.text)
    #print(html.tostring(tree))

    # if foo > 10:
    #     print('saw the arg')
    #args = parseArguments()
    #print(args.debtDad)

    gdp_table = soup.find("table", attrs={"class": "tb_bangdiem"})

    headingstabledata = gdp_table.thead.find_all("tr")

    if gdp_table is None:
        print("No table. Login failed")
    else: print('Login successful!\n')
 
    gdp_table_data = gdp_table.tbody.find_all("tr")  # contains 2 rows
    mon = ['toan', 'vatli', 'hoa', 'sinh', 'tin', 'van', 'su', 'dia', 'anh', 'gdcd', 'congnghe', 'theduc', 'gdqp', 'nghe', 'tuchon']
    diem = {'toan': [],
    'vatli': [],
    'hoa': [],
    'sinh': [],
    'tin': [],
    'van': [],
    'su': [],
    'dia': [],
    'anh': [],
    'gdcd': [],
    'congnghe': [],
    'theduc': [],
    'gdqp': [],
    'nghe':[],
    'tuchon':[]}
    #print(gdp_table_data[7].text)
    print(soup.find("td", attrs={"class": "noborder text_center"}).text, '\t', soup.find_all("td", attrs={"class": "noborder"})[3].text)
    print(soup.find_all("td", attrs={"class": "noborder"})[5].text, '\t',  soup.find_all("td", attrs={"class": "noborder"})[2].text, '\t', soup.find_all("td", attrs={"class": "noborder"})[4].text)

    gradetable = Table(show_header=True, show_footer=False)
    onetime = 1

    color = '\033[1;32;49m'
    #print(json.dumps(gdp_table_data[0].text))
    for x in range(0, len(gdp_table_data)):
        for y in range(0, len(gdp_table_data[x].find_all('td'))):
            #if y==1: 
            #    print(gdp_table_data[x].find_all('td')[y].text,'\t\t', end='')
            #else :
            #    print(gdp_table_data[x].find_all('td')[y].text, end='\t')
            if onetime==1:
                gradetable.add_column('Column')
            diem[mon[x]].append(gdp_table_data[x].find_all('td')[y].text)
        gradetable.add_row(*diem[mon[x]])
        onetime=0
        #print()
    diemjson = json.dumps(diem, indent=2)
    console = Console()
    gradetable.box = box.SIMPLE
    gradetable.row_styles = ["none","none","none","none", "blue"]
    gradetable.columns[1].style = "none"
    gradetable.columns[1].style = "white on black"
    gradetable.columns[0].justify = 'center'
    
    console.print(gradetable)

if __name__ == '__main__':
    main()

    </py-script> -->
</body>

</html>
